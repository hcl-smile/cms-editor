{"id":"../node_modules/amis/lib/utils/Animation.js","dependencies":[{"name":"/usr/local/work/amis-editor/package.json","includedInParent":true,"mtime":1607074594934},{"name":"/usr/local/work/amis-editor/node_modules/amis/package.json","includedInParent":true,"mtime":1606632442645},{"name":"tslib","loc":{"line":9,"column":22},"parent":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/Animation.js","resolved":"/usr/local/work/amis-editor/node_modules/tslib/tslib.es6.js"}],"generated":{"js":"\"use strict\";\n// 基本上都是从 sortable 那抄的，让拖拽切换有个动画，看起来更流畅。\n// 用法是移动前先 animat.capture(container) 把移动前的位置信息记住\n// 然后移动节点\n// 然后 animate.animateAll(); 计算移动后的位置，然后马上通过 css transform 到原来的位置\n// 然后开始动画到移动后的位置。\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AnimationManager = void 0;\nvar tslib_1 = require(\"tslib\");\nfunction userAgent(pattern) {\n    if (typeof window !== 'undefined' && window.navigator) {\n        return !!( /*@__PURE__*/navigator.userAgent.match(pattern));\n    }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\n// const Edge = userAgent(/Edge/i);\n// const FireFox = userAgent(/firefox/i);\n// const Safari =\n//   userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\n// const IOS = userAgent(/iP(ad|od|hone)/i);\n// const ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\nvar AnimationDurtation = 150;\nvar AnimationEasing = 'cubic-bezier(1, 0, 0, 1)';\nvar AnimationManager = /** @class */ (function () {\n    function AnimationManager() {\n        this.animating = false;\n        this.states = [];\n    }\n    AnimationManager.prototype.capture = function (el) {\n        var _this = this;\n        // 清空，重复调用，旧的不管了\n        this.states = [];\n        var children = [].slice.call(el.children);\n        children.forEach(function (child) {\n            // 如果是 ghost\n            if (child.classList.contains('is-ghost')) {\n                return;\n            }\n            var rect = getRect(child);\n            // 通常是隐藏节点\n            if (!rect.width) {\n                return;\n            }\n            var fromRect = tslib_1.__assign({}, rect);\n            var state = {\n                target: child,\n                rect: rect\n            };\n            // 还在动画中\n            if (child.thisAnimationDuration) {\n                var childMatrix = matrix(child);\n                if (childMatrix) {\n                    fromRect.top -= childMatrix.f;\n                    fromRect.left -= childMatrix.e;\n                }\n            }\n            child.fromRect = fromRect;\n            _this.states.push(state);\n        });\n    };\n    AnimationManager.prototype.animateAll = function (callback) {\n        var _this = this;\n        this.animating = false;\n        var animationTime = 0;\n        this.states.forEach(function (state) {\n            var time = 0, target = state.target, fromRect = target.fromRect, toRect = tslib_1.__assign({}, getRect(target)), prevFromRect = target.prevFromRect, prevToRect = target.prevToRect, animatingRect = state.rect, targetMatrix = matrix(target);\n            if (targetMatrix) {\n                // Compensate for current animation\n                toRect.top -= targetMatrix.f;\n                toRect.left -= targetMatrix.e;\n            }\n            target.toRect = toRect;\n            if (target.thisAnimationDuration) {\n                // Could also check if animatingRect is between fromRect and toRect\n                if (isRectEqual(prevFromRect, toRect) &&\n                    !isRectEqual(fromRect, toRect) &&\n                    // Make sure animatingRect is on line between toRect & fromRect\n                    (animatingRect.top - toRect.top) /\n                        (animatingRect.left - toRect.left) ===\n                        (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n                    // If returning to same place as started from animation and on same axis\n                    time = calculateRealTime(animatingRect, prevFromRect, prevToRect);\n                }\n            }\n            // if fromRect != toRect: animate\n            if (!isRectEqual(toRect, fromRect)) {\n                target.prevFromRect = fromRect;\n                target.prevToRect = toRect;\n                if (!time) {\n                    time = AnimationDurtation;\n                }\n                _this.animate(target, animatingRect, toRect, time);\n            }\n            if (time) {\n                _this.animating = true;\n                animationTime = Math.max(animationTime, time);\n                clearTimeout(target.animationResetTimer);\n                target.animationResetTimer = setTimeout(function () {\n                    target.animationTime = 0;\n                    target.prevFromRect = null;\n                    target.fromRect = null;\n                    target.prevToRect = null;\n                    target.thisAnimationDuration = null;\n                }, time);\n                target.thisAnimationDuration = time;\n            }\n        });\n        clearTimeout(this.animationCallbackId);\n        if (!this.animating) {\n            if (typeof callback === 'function')\n                callback();\n        }\n        else {\n            this.animationCallbackId = setTimeout(function () {\n                _this.animating = false;\n                if (typeof callback === 'function')\n                    callback();\n            }, animationTime);\n        }\n        this.states = [];\n    };\n    AnimationManager.prototype.animate = function (target, currentRect, toRect, duration) {\n        if (duration) {\n            var affectDisplay_1 = false;\n            css(target, 'transition', '');\n            css(target, 'transform', '');\n            var translateX = currentRect.left - toRect.left, translateY = currentRect.top - toRect.top;\n            target.animatingX = !!translateX;\n            target.animatingY = !!translateY;\n            css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n            if (css(target, 'display') === 'inline') {\n                affectDisplay_1 = true;\n                css(target, 'display', 'inline-block');\n            }\n            target.offsetWidth; // repaint\n            css(target, 'transition', 'transform ' +\n                duration +\n                'ms' +\n                (AnimationEasing ? ' ' + AnimationEasing : ''));\n            css(target, 'transform', 'translate3d(0,0,0)');\n            typeof target.animated === 'number' &&\n                clearTimeout(target.animated);\n            target.animated = setTimeout(function () {\n                css(target, 'transition', '');\n                css(target, 'transform', '');\n                affectDisplay_1 && css(target, 'display', '');\n                target.animated = false;\n                target.animatingX = false;\n                target.animatingY = false;\n            }, duration);\n        }\n    };\n    return AnimationManager;\n}());\nexports.AnimationManager = AnimationManager;\nfunction matrix(el) {\n    var appliedTransforms = '';\n    if (typeof el === 'string') {\n        appliedTransforms = el;\n    }\n    else {\n        var transform = css(el, 'transform');\n        if (transform && transform !== 'none') {\n            appliedTransforms = transform + ' ' + appliedTransforms;\n        }\n    }\n    var matrixFn = window.DOMMatrix ||\n        window.WebKitCSSMatrix ||\n        window.CSSMatrix ||\n        window.MSCSSMatrix;\n    /*jshint -W056 */\n    return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction css(el, prop, val) {\n    var style = el && el.style;\n    if (style) {\n        if (val === void 0) {\n            if (document.defaultView && document.defaultView.getComputedStyle) {\n                val = document.defaultView.getComputedStyle(el, '');\n            }\n            else if (el.currentStyle) {\n                val = el.currentStyle;\n            }\n            return prop === void 0 ? val : val[prop];\n        }\n        else {\n            if (!(prop in style) && prop.indexOf('webkit') === -1) {\n                prop = '-webkit-' + prop;\n            }\n            style[prop] = val + (typeof val === 'string' ? '' : 'px');\n        }\n    }\n}\nfunction isRectEqual(rect1, rect2) {\n    return (Math.round(rect1.top) === Math.round(rect2.top) &&\n        Math.round(rect1.left) === Math.round(rect2.left) &&\n        Math.round(rect1.height) === Math.round(rect2.height) &&\n        Math.round(rect1.width) === Math.round(rect2.width));\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect) {\n    return ((Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) +\n        Math.pow(fromRect.left - animatingRect.left, 2)) /\n        Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) +\n            Math.pow(fromRect.left - toRect.left, 2))) *\n        AnimationDurtation);\n}\nfunction getWindowScrollingElement() {\n    var scrollingElement = document.scrollingElement;\n    if (scrollingElement) {\n        return scrollingElement;\n    }\n    else {\n        return document.documentElement;\n    }\n}\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n    if (!el.getBoundingClientRect && el !== window)\n        return;\n    var elRect, top, left, bottom, right, height, width;\n    if (el !== window && el !== getWindowScrollingElement()) {\n        elRect = el.getBoundingClientRect();\n        top = elRect.top;\n        left = elRect.left;\n        bottom = elRect.bottom;\n        right = elRect.right;\n        height = elRect.height;\n        width = elRect.width;\n    }\n    else {\n        top = 0;\n        left = 0;\n        bottom = window.innerHeight;\n        right = window.innerWidth;\n        height = window.innerHeight;\n        width = window.innerWidth;\n    }\n    if ((relativeToContainingBlock || relativeToNonStaticParent) &&\n        el !== window) {\n        // Adjust for translate()\n        container = container || el.parentNode;\n        // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n        // Not needed on <= IE11\n        if (!IE11OrLess) {\n            do {\n                if (container &&\n                    container.getBoundingClientRect &&\n                    (css(container, 'transform') !== 'none' ||\n                        (relativeToNonStaticParent &&\n                            css(container, 'position') !== 'static'))) {\n                    var containerRect = container.getBoundingClientRect();\n                    // Set relative to edges of padding box of container\n                    top -=\n                        containerRect.top + parseInt(css(container, 'border-top-width'));\n                    left -=\n                        containerRect.left + parseInt(css(container, 'border-left-width'));\n                    bottom = top + elRect.height;\n                    right = left + elRect.width;\n                    break;\n                }\n                /* jshint boss:true */\n            } while ((container = container.parentNode));\n        }\n    }\n    if (undoScale && el !== window) {\n        // Adjust for scale()\n        var elMatrix = matrix(container || el), scaleX = elMatrix && elMatrix.a, scaleY = elMatrix && elMatrix.d;\n        if (elMatrix) {\n            top /= scaleY;\n            left /= scaleX;\n            width /= scaleX;\n            height /= scaleY;\n            bottom = top + height;\n            right = left + width;\n        }\n    }\n    return {\n        top: top,\n        left: left,\n        bottom: bottom,\n        right: right,\n        width: width,\n        height: height\n    };\n}\nexports.default = new AnimationManager();\n\n"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":131,"column":0},"generated":{"line":131,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":132,"column":0},"generated":{"line":132,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":133,"column":0},"generated":{"line":133,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":134,"column":0},"generated":{"line":134,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":135,"column":0},"generated":{"line":135,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":136,"column":0},"generated":{"line":136,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":137,"column":0},"generated":{"line":137,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":138,"column":0},"generated":{"line":138,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":139,"column":0},"generated":{"line":139,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":140,"column":0},"generated":{"line":140,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":141,"column":0},"generated":{"line":141,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":142,"column":0},"generated":{"line":142,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":143,"column":0},"generated":{"line":143,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":144,"column":0},"generated":{"line":144,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":145,"column":0},"generated":{"line":145,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":146,"column":0},"generated":{"line":146,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":147,"column":0},"generated":{"line":147,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":148,"column":0},"generated":{"line":148,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":149,"column":0},"generated":{"line":149,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":150,"column":0},"generated":{"line":150,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":151,"column":0},"generated":{"line":151,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":152,"column":0},"generated":{"line":152,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":153,"column":0},"generated":{"line":153,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":154,"column":0},"generated":{"line":154,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":155,"column":0},"generated":{"line":155,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":156,"column":0},"generated":{"line":156,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":157,"column":0},"generated":{"line":157,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":158,"column":0},"generated":{"line":158,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":159,"column":0},"generated":{"line":159,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":160,"column":0},"generated":{"line":160,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":161,"column":0},"generated":{"line":161,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":162,"column":0},"generated":{"line":162,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":163,"column":0},"generated":{"line":163,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":164,"column":0},"generated":{"line":164,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":165,"column":0},"generated":{"line":165,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":166,"column":0},"generated":{"line":166,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":167,"column":0},"generated":{"line":167,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":168,"column":0},"generated":{"line":168,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":169,"column":0},"generated":{"line":169,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":170,"column":0},"generated":{"line":170,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":171,"column":0},"generated":{"line":171,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":172,"column":0},"generated":{"line":172,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":173,"column":0},"generated":{"line":173,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":174,"column":0},"generated":{"line":174,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":175,"column":0},"generated":{"line":175,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":176,"column":0},"generated":{"line":176,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":177,"column":0},"generated":{"line":177,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":178,"column":0},"generated":{"line":178,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":179,"column":0},"generated":{"line":179,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":180,"column":0},"generated":{"line":180,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":181,"column":0},"generated":{"line":181,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":182,"column":0},"generated":{"line":182,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":183,"column":0},"generated":{"line":183,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":184,"column":0},"generated":{"line":184,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":185,"column":0},"generated":{"line":185,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":186,"column":0},"generated":{"line":186,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":187,"column":0},"generated":{"line":187,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":188,"column":0},"generated":{"line":188,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":189,"column":0},"generated":{"line":189,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":190,"column":0},"generated":{"line":190,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":191,"column":0},"generated":{"line":191,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":192,"column":0},"generated":{"line":192,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":193,"column":0},"generated":{"line":193,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":194,"column":0},"generated":{"line":194,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":195,"column":0},"generated":{"line":195,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":196,"column":0},"generated":{"line":196,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":197,"column":0},"generated":{"line":197,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":198,"column":0},"generated":{"line":198,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":199,"column":0},"generated":{"line":199,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":200,"column":0},"generated":{"line":200,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":201,"column":0},"generated":{"line":201,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":202,"column":0},"generated":{"line":202,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":203,"column":0},"generated":{"line":203,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":204,"column":0},"generated":{"line":204,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":205,"column":0},"generated":{"line":205,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":206,"column":0},"generated":{"line":206,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":207,"column":0},"generated":{"line":207,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":208,"column":0},"generated":{"line":208,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":209,"column":0},"generated":{"line":209,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":210,"column":0},"generated":{"line":210,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":211,"column":0},"generated":{"line":211,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":212,"column":0},"generated":{"line":212,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":213,"column":0},"generated":{"line":213,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":214,"column":0},"generated":{"line":214,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":215,"column":0},"generated":{"line":215,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":216,"column":0},"generated":{"line":216,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":217,"column":0},"generated":{"line":217,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":218,"column":0},"generated":{"line":218,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":219,"column":0},"generated":{"line":219,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":220,"column":0},"generated":{"line":220,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":221,"column":0},"generated":{"line":221,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":222,"column":0},"generated":{"line":222,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":223,"column":0},"generated":{"line":223,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":224,"column":0},"generated":{"line":224,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":225,"column":0},"generated":{"line":225,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":226,"column":0},"generated":{"line":226,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":227,"column":0},"generated":{"line":227,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":228,"column":0},"generated":{"line":228,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":229,"column":0},"generated":{"line":229,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":230,"column":0},"generated":{"line":230,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":231,"column":0},"generated":{"line":231,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":232,"column":0},"generated":{"line":232,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":233,"column":0},"generated":{"line":233,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":234,"column":0},"generated":{"line":234,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":235,"column":0},"generated":{"line":235,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":236,"column":0},"generated":{"line":236,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":237,"column":0},"generated":{"line":237,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":238,"column":0},"generated":{"line":238,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":239,"column":0},"generated":{"line":239,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":240,"column":0},"generated":{"line":240,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":241,"column":0},"generated":{"line":241,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":242,"column":0},"generated":{"line":242,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":243,"column":0},"generated":{"line":243,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":244,"column":0},"generated":{"line":244,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":245,"column":0},"generated":{"line":245,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":246,"column":0},"generated":{"line":246,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":247,"column":0},"generated":{"line":247,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":248,"column":0},"generated":{"line":248,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":249,"column":0},"generated":{"line":249,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":250,"column":0},"generated":{"line":250,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":251,"column":0},"generated":{"line":251,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":252,"column":0},"generated":{"line":252,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":253,"column":0},"generated":{"line":253,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":254,"column":0},"generated":{"line":254,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":255,"column":0},"generated":{"line":255,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":256,"column":0},"generated":{"line":256,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":257,"column":0},"generated":{"line":257,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":258,"column":0},"generated":{"line":258,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":259,"column":0},"generated":{"line":259,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":260,"column":0},"generated":{"line":260,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":261,"column":0},"generated":{"line":261,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":262,"column":0},"generated":{"line":262,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":263,"column":0},"generated":{"line":263,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":264,"column":0},"generated":{"line":264,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":265,"column":0},"generated":{"line":265,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":266,"column":0},"generated":{"line":266,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":267,"column":0},"generated":{"line":267,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":268,"column":0},"generated":{"line":268,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":269,"column":0},"generated":{"line":269,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":270,"column":0},"generated":{"line":270,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":271,"column":0},"generated":{"line":271,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":272,"column":0},"generated":{"line":272,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":273,"column":0},"generated":{"line":273,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":274,"column":0},"generated":{"line":274,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":275,"column":0},"generated":{"line":275,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":276,"column":0},"generated":{"line":276,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":277,"column":0},"generated":{"line":277,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":278,"column":0},"generated":{"line":278,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":279,"column":0},"generated":{"line":279,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":280,"column":0},"generated":{"line":280,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":281,"column":0},"generated":{"line":281,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":282,"column":0},"generated":{"line":282,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":283,"column":0},"generated":{"line":283,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":284,"column":0},"generated":{"line":284,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":285,"column":0},"generated":{"line":285,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":286,"column":0},"generated":{"line":286,"column":0}},{"source":"../node_modules/amis/lib/utils/Animation.js","original":{"line":287,"column":0},"generated":{"line":287,"column":0}}],"sources":{"../node_modules/amis/lib/utils/Animation.js":"\"use strict\";\n// 基本上都是从 sortable 那抄的，让拖拽切换有个动画，看起来更流畅。\n// 用法是移动前先 animat.capture(container) 把移动前的位置信息记住\n// 然后移动节点\n// 然后 animate.animateAll(); 计算移动后的位置，然后马上通过 css transform 到原来的位置\n// 然后开始动画到移动后的位置。\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AnimationManager = void 0;\nvar tslib_1 = require(\"tslib\");\nfunction userAgent(pattern) {\n    if (typeof window !== 'undefined' && window.navigator) {\n        return !!( /*@__PURE__*/navigator.userAgent.match(pattern));\n    }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\n// const Edge = userAgent(/Edge/i);\n// const FireFox = userAgent(/firefox/i);\n// const Safari =\n//   userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\n// const IOS = userAgent(/iP(ad|od|hone)/i);\n// const ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\nvar AnimationDurtation = 150;\nvar AnimationEasing = 'cubic-bezier(1, 0, 0, 1)';\nvar AnimationManager = /** @class */ (function () {\n    function AnimationManager() {\n        this.animating = false;\n        this.states = [];\n    }\n    AnimationManager.prototype.capture = function (el) {\n        var _this = this;\n        // 清空，重复调用，旧的不管了\n        this.states = [];\n        var children = [].slice.call(el.children);\n        children.forEach(function (child) {\n            // 如果是 ghost\n            if (child.classList.contains('is-ghost')) {\n                return;\n            }\n            var rect = getRect(child);\n            // 通常是隐藏节点\n            if (!rect.width) {\n                return;\n            }\n            var fromRect = tslib_1.__assign({}, rect);\n            var state = {\n                target: child,\n                rect: rect\n            };\n            // 还在动画中\n            if (child.thisAnimationDuration) {\n                var childMatrix = matrix(child);\n                if (childMatrix) {\n                    fromRect.top -= childMatrix.f;\n                    fromRect.left -= childMatrix.e;\n                }\n            }\n            child.fromRect = fromRect;\n            _this.states.push(state);\n        });\n    };\n    AnimationManager.prototype.animateAll = function (callback) {\n        var _this = this;\n        this.animating = false;\n        var animationTime = 0;\n        this.states.forEach(function (state) {\n            var time = 0, target = state.target, fromRect = target.fromRect, toRect = tslib_1.__assign({}, getRect(target)), prevFromRect = target.prevFromRect, prevToRect = target.prevToRect, animatingRect = state.rect, targetMatrix = matrix(target);\n            if (targetMatrix) {\n                // Compensate for current animation\n                toRect.top -= targetMatrix.f;\n                toRect.left -= targetMatrix.e;\n            }\n            target.toRect = toRect;\n            if (target.thisAnimationDuration) {\n                // Could also check if animatingRect is between fromRect and toRect\n                if (isRectEqual(prevFromRect, toRect) &&\n                    !isRectEqual(fromRect, toRect) &&\n                    // Make sure animatingRect is on line between toRect & fromRect\n                    (animatingRect.top - toRect.top) /\n                        (animatingRect.left - toRect.left) ===\n                        (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n                    // If returning to same place as started from animation and on same axis\n                    time = calculateRealTime(animatingRect, prevFromRect, prevToRect);\n                }\n            }\n            // if fromRect != toRect: animate\n            if (!isRectEqual(toRect, fromRect)) {\n                target.prevFromRect = fromRect;\n                target.prevToRect = toRect;\n                if (!time) {\n                    time = AnimationDurtation;\n                }\n                _this.animate(target, animatingRect, toRect, time);\n            }\n            if (time) {\n                _this.animating = true;\n                animationTime = Math.max(animationTime, time);\n                clearTimeout(target.animationResetTimer);\n                target.animationResetTimer = setTimeout(function () {\n                    target.animationTime = 0;\n                    target.prevFromRect = null;\n                    target.fromRect = null;\n                    target.prevToRect = null;\n                    target.thisAnimationDuration = null;\n                }, time);\n                target.thisAnimationDuration = time;\n            }\n        });\n        clearTimeout(this.animationCallbackId);\n        if (!this.animating) {\n            if (typeof callback === 'function')\n                callback();\n        }\n        else {\n            this.animationCallbackId = setTimeout(function () {\n                _this.animating = false;\n                if (typeof callback === 'function')\n                    callback();\n            }, animationTime);\n        }\n        this.states = [];\n    };\n    AnimationManager.prototype.animate = function (target, currentRect, toRect, duration) {\n        if (duration) {\n            var affectDisplay_1 = false;\n            css(target, 'transition', '');\n            css(target, 'transform', '');\n            var translateX = currentRect.left - toRect.left, translateY = currentRect.top - toRect.top;\n            target.animatingX = !!translateX;\n            target.animatingY = !!translateY;\n            css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n            if (css(target, 'display') === 'inline') {\n                affectDisplay_1 = true;\n                css(target, 'display', 'inline-block');\n            }\n            target.offsetWidth; // repaint\n            css(target, 'transition', 'transform ' +\n                duration +\n                'ms' +\n                (AnimationEasing ? ' ' + AnimationEasing : ''));\n            css(target, 'transform', 'translate3d(0,0,0)');\n            typeof target.animated === 'number' &&\n                clearTimeout(target.animated);\n            target.animated = setTimeout(function () {\n                css(target, 'transition', '');\n                css(target, 'transform', '');\n                affectDisplay_1 && css(target, 'display', '');\n                target.animated = false;\n                target.animatingX = false;\n                target.animatingY = false;\n            }, duration);\n        }\n    };\n    return AnimationManager;\n}());\nexports.AnimationManager = AnimationManager;\nfunction matrix(el) {\n    var appliedTransforms = '';\n    if (typeof el === 'string') {\n        appliedTransforms = el;\n    }\n    else {\n        var transform = css(el, 'transform');\n        if (transform && transform !== 'none') {\n            appliedTransforms = transform + ' ' + appliedTransforms;\n        }\n    }\n    var matrixFn = window.DOMMatrix ||\n        window.WebKitCSSMatrix ||\n        window.CSSMatrix ||\n        window.MSCSSMatrix;\n    /*jshint -W056 */\n    return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction css(el, prop, val) {\n    var style = el && el.style;\n    if (style) {\n        if (val === void 0) {\n            if (document.defaultView && document.defaultView.getComputedStyle) {\n                val = document.defaultView.getComputedStyle(el, '');\n            }\n            else if (el.currentStyle) {\n                val = el.currentStyle;\n            }\n            return prop === void 0 ? val : val[prop];\n        }\n        else {\n            if (!(prop in style) && prop.indexOf('webkit') === -1) {\n                prop = '-webkit-' + prop;\n            }\n            style[prop] = val + (typeof val === 'string' ? '' : 'px');\n        }\n    }\n}\nfunction isRectEqual(rect1, rect2) {\n    return (Math.round(rect1.top) === Math.round(rect2.top) &&\n        Math.round(rect1.left) === Math.round(rect2.left) &&\n        Math.round(rect1.height) === Math.round(rect2.height) &&\n        Math.round(rect1.width) === Math.round(rect2.width));\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect) {\n    return ((Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) +\n        Math.pow(fromRect.left - animatingRect.left, 2)) /\n        Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) +\n            Math.pow(fromRect.left - toRect.left, 2))) *\n        AnimationDurtation);\n}\nfunction getWindowScrollingElement() {\n    var scrollingElement = document.scrollingElement;\n    if (scrollingElement) {\n        return scrollingElement;\n    }\n    else {\n        return document.documentElement;\n    }\n}\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n    if (!el.getBoundingClientRect && el !== window)\n        return;\n    var elRect, top, left, bottom, right, height, width;\n    if (el !== window && el !== getWindowScrollingElement()) {\n        elRect = el.getBoundingClientRect();\n        top = elRect.top;\n        left = elRect.left;\n        bottom = elRect.bottom;\n        right = elRect.right;\n        height = elRect.height;\n        width = elRect.width;\n    }\n    else {\n        top = 0;\n        left = 0;\n        bottom = window.innerHeight;\n        right = window.innerWidth;\n        height = window.innerHeight;\n        width = window.innerWidth;\n    }\n    if ((relativeToContainingBlock || relativeToNonStaticParent) &&\n        el !== window) {\n        // Adjust for translate()\n        container = container || el.parentNode;\n        // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n        // Not needed on <= IE11\n        if (!IE11OrLess) {\n            do {\n                if (container &&\n                    container.getBoundingClientRect &&\n                    (css(container, 'transform') !== 'none' ||\n                        (relativeToNonStaticParent &&\n                            css(container, 'position') !== 'static'))) {\n                    var containerRect = container.getBoundingClientRect();\n                    // Set relative to edges of padding box of container\n                    top -=\n                        containerRect.top + parseInt(css(container, 'border-top-width'));\n                    left -=\n                        containerRect.left + parseInt(css(container, 'border-left-width'));\n                    bottom = top + elRect.height;\n                    right = left + elRect.width;\n                    break;\n                }\n                /* jshint boss:true */\n            } while ((container = container.parentNode));\n        }\n    }\n    if (undoScale && el !== window) {\n        // Adjust for scale()\n        var elMatrix = matrix(container || el), scaleX = elMatrix && elMatrix.a, scaleY = elMatrix && elMatrix.d;\n        if (elMatrix) {\n            top /= scaleY;\n            left /= scaleX;\n            width /= scaleX;\n            height /= scaleY;\n            bottom = top + height;\n            right = left + width;\n        }\n    }\n    return {\n        top: top,\n        left: left,\n        bottom: bottom,\n        right: right,\n        width: width,\n        height: height\n    };\n}\nexports.default = new AnimationManager();\n\n"},"lineCount":287}},"error":null,"hash":"74c067bb87e3bbb21d1a4d50b39f6bb3","cacheData":{"env":{}}}