{"id":"../node_modules/amis/lib/utils/tpl.js","dependencies":[{"name":"/Users/hcltmac/Desktop/amis-editor/package.json","includedInParent":true,"mtime":1607395305037},{"name":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/package.json","includedInParent":true,"mtime":1606632442000},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/lib/utils/tpl.js","resolved":"/Users/hcltmac/Desktop/amis-editor/node_modules/tslib/tslib.es6.js"},{"name":"./tpl-builtin","loc":{"line":5,"column":28},"parent":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/lib/utils/tpl.js","resolved":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/lib/utils/tpl-builtin.js"},{"name":"./tpl-lodash","loc":{"line":6,"column":27},"parent":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/lib/utils/tpl.js","resolved":"/Users/hcltmac/Desktop/amis-editor/node_modules/amis/lib/utils/tpl-lodash.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.evalJS = exports.setCustomEvalJs = exports.evalExpression = exports.setCustomEvalExpression = exports.filter = exports.registerTplEnginer = void 0;\nvar tslib_1 = require(\"tslib\");\nvar tpl_builtin_1 = require(\"./tpl-builtin\");\nvar tpl_lodash_1 = require(\"./tpl-lodash\");\nvar enginers = {};\nfunction registerTplEnginer(name, enginer) {\n    enginers[name] = enginer;\n}\nexports.registerTplEnginer = registerTplEnginer;\nfunction filter(tpl, data) {\n    if (data === void 0) { data = {}; }\n    var rest = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        rest[_i - 2] = arguments[_i];\n    }\n    if (!tpl || typeof tpl !== 'string') {\n        return '';\n    }\n    var keys = Object.keys(enginers);\n    for (var i = 0, len = keys.length; i < len; i++) {\n        var enginer = enginers[keys[i]];\n        if (enginer.test(tpl)) {\n            return enginer.compile.apply(enginer, tslib_1.__spreadArrays([tpl, data], rest));\n        }\n    }\n    return tpl;\n}\nexports.filter = filter;\n// 缓存一下提升性能\nvar EVAL_CACHE = {};\nvar customEvalExpressionFn;\nfunction setCustomEvalExpression(fn) {\n    customEvalExpressionFn = fn;\n}\nexports.setCustomEvalExpression = setCustomEvalExpression;\n// 几乎所有的 visibleOn requiredOn 都是通过这个方法判断出来结果，很粗暴也存在风险，建议自己实现。\n// 如果想自己实现，请通过 setCustomEvalExpression 来替换。\nfunction evalExpression(expression, data) {\n    if (typeof customEvalExpressionFn === 'function') {\n        return customEvalExpressionFn(expression, data);\n    }\n    if (!expression || typeof expression !== 'string') {\n        return false;\n    }\n    /* jshint evil:true */\n    try {\n        var debug = false;\n        var idx = expression.indexOf('debugger');\n        if (~idx) {\n            debug = true;\n            expression = expression.replace(/debugger;?/, '');\n        }\n        var fn = void 0;\n        if (expression in EVAL_CACHE) {\n            fn = EVAL_CACHE[expression];\n        }\n        else {\n            fn = new Function('data', 'utils', \"with(data) {\" + (debug ? 'debugger;' : '') + \"return !!(\" + expression + \");}\");\n            EVAL_CACHE[expression] = fn;\n        }\n        data = data || {};\n        return fn.call(data, data, tpl_builtin_1.getFilters());\n    }\n    catch (e) {\n        console.warn(expression, e);\n        return false;\n    }\n}\nexports.evalExpression = evalExpression;\nvar customEvalJsFn;\nfunction setCustomEvalJs(fn) {\n    customEvalJsFn = fn;\n}\nexports.setCustomEvalJs = setCustomEvalJs;\n// 这个主要用在 formula 里面，用来动态的改变某个值。也很粗暴，建议自己实现。\n// 如果想自己实现，请通过 setCustomEvalJs 来替换。\nfunction evalJS(js, data) {\n    if (typeof customEvalJsFn === 'function') {\n        return customEvalJsFn(js, data);\n    }\n    /* jshint evil:true */\n    try {\n        var fn = new Function('data', 'utils', \"with(data) {\" + (/^\\s*return\\b/.test(js) ? '' : 'return ') + js + \";}\");\n        data = data || {};\n        return fn.call(data, data, tpl_builtin_1.getFilters());\n    }\n    catch (e) {\n        console.warn(js, e);\n        return null;\n    }\n}\nexports.evalJS = evalJS;\n[tpl_builtin_1.register, tpl_lodash_1.register].forEach(function (fn) {\n    var info = fn();\n    registerTplEnginer(info.name, {\n        test: info.test,\n        compile: info.compile\n    });\n});\n\n"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}}],"sources":{"../node_modules/amis/lib/utils/tpl.js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.evalJS = exports.setCustomEvalJs = exports.evalExpression = exports.setCustomEvalExpression = exports.filter = exports.registerTplEnginer = void 0;\nvar tslib_1 = require(\"tslib\");\nvar tpl_builtin_1 = require(\"./tpl-builtin\");\nvar tpl_lodash_1 = require(\"./tpl-lodash\");\nvar enginers = {};\nfunction registerTplEnginer(name, enginer) {\n    enginers[name] = enginer;\n}\nexports.registerTplEnginer = registerTplEnginer;\nfunction filter(tpl, data) {\n    if (data === void 0) { data = {}; }\n    var rest = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        rest[_i - 2] = arguments[_i];\n    }\n    if (!tpl || typeof tpl !== 'string') {\n        return '';\n    }\n    var keys = Object.keys(enginers);\n    for (var i = 0, len = keys.length; i < len; i++) {\n        var enginer = enginers[keys[i]];\n        if (enginer.test(tpl)) {\n            return enginer.compile.apply(enginer, tslib_1.__spreadArrays([tpl, data], rest));\n        }\n    }\n    return tpl;\n}\nexports.filter = filter;\n// 缓存一下提升性能\nvar EVAL_CACHE = {};\nvar customEvalExpressionFn;\nfunction setCustomEvalExpression(fn) {\n    customEvalExpressionFn = fn;\n}\nexports.setCustomEvalExpression = setCustomEvalExpression;\n// 几乎所有的 visibleOn requiredOn 都是通过这个方法判断出来结果，很粗暴也存在风险，建议自己实现。\n// 如果想自己实现，请通过 setCustomEvalExpression 来替换。\nfunction evalExpression(expression, data) {\n    if (typeof customEvalExpressionFn === 'function') {\n        return customEvalExpressionFn(expression, data);\n    }\n    if (!expression || typeof expression !== 'string') {\n        return false;\n    }\n    /* jshint evil:true */\n    try {\n        var debug = false;\n        var idx = expression.indexOf('debugger');\n        if (~idx) {\n            debug = true;\n            expression = expression.replace(/debugger;?/, '');\n        }\n        var fn = void 0;\n        if (expression in EVAL_CACHE) {\n            fn = EVAL_CACHE[expression];\n        }\n        else {\n            fn = new Function('data', 'utils', \"with(data) {\" + (debug ? 'debugger;' : '') + \"return !!(\" + expression + \");}\");\n            EVAL_CACHE[expression] = fn;\n        }\n        data = data || {};\n        return fn.call(data, data, tpl_builtin_1.getFilters());\n    }\n    catch (e) {\n        console.warn(expression, e);\n        return false;\n    }\n}\nexports.evalExpression = evalExpression;\nvar customEvalJsFn;\nfunction setCustomEvalJs(fn) {\n    customEvalJsFn = fn;\n}\nexports.setCustomEvalJs = setCustomEvalJs;\n// 这个主要用在 formula 里面，用来动态的改变某个值。也很粗暴，建议自己实现。\n// 如果想自己实现，请通过 setCustomEvalJs 来替换。\nfunction evalJS(js, data) {\n    if (typeof customEvalJsFn === 'function') {\n        return customEvalJsFn(js, data);\n    }\n    /* jshint evil:true */\n    try {\n        var fn = new Function('data', 'utils', \"with(data) {\" + (/^\\s*return\\b/.test(js) ? '' : 'return ') + js + \";}\");\n        data = data || {};\n        return fn.call(data, data, tpl_builtin_1.getFilters());\n    }\n    catch (e) {\n        console.warn(js, e);\n        return null;\n    }\n}\nexports.evalJS = evalJS;\n[tpl_builtin_1.register, tpl_lodash_1.register].forEach(function (fn) {\n    var info = fn();\n    registerTplEnginer(info.name, {\n        test: info.test,\n        compile: info.compile\n    });\n});\n\n"},"lineCount":103}},"error":null,"hash":"a230fa58e9ffd98be1e12419892a555e","cacheData":{"env":{}}}