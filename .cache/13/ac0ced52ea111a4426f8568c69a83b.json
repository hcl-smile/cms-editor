{"id":"../node_modules/amis/lib/utils/tpl-lodash.js","dependencies":[{"name":"/usr/local/work/amis-editor/package.json","includedInParent":true,"mtime":1607074594934},{"name":"/usr/local/work/amis-editor/node_modules/amis/package.json","includedInParent":true,"mtime":1606632442645},{"name":"tslib","loc":{"line":4,"column":22},"parent":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/tpl-lodash.js","resolved":"/usr/local/work/amis-editor/node_modules/tslib/tslib.es6.js"},{"name":"lodash/template","loc":{"line":5,"column":49},"parent":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/tpl-lodash.js","resolved":"/usr/local/work/amis-editor/node_modules/lodash/template.js"},{"name":"./tpl-builtin","loc":{"line":6,"column":28},"parent":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/tpl-lodash.js","resolved":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/tpl-builtin.js"},{"name":"moment","loc":{"line":7,"column":47},"parent":"/usr/local/work/amis-editor/node_modules/amis/lib/utils/tpl-lodash.js","resolved":"/usr/local/work/amis-editor/node_modules/moment/moment.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.register = void 0;\nvar tslib_1 = require(\"tslib\");\nvar template_1 = tslib_1.__importDefault(require(\"lodash/template\"));\nvar tpl_builtin_1 = require(\"./tpl-builtin\");\nvar moment_1 = tslib_1.__importDefault(require(\"moment\"));\nvar imports = {\n    default: undefined,\n    moment: moment_1.default,\n    countDown: function (end) {\n        if (!end) {\n            return '--';\n        }\n        var date = new Date(parseInt(end, 10) * 1000);\n        var now = Date.now();\n        if (date.getTime() < now) {\n            return '已结束';\n        }\n        return Math.ceil((date.getTime() - now) / (1000 * 60 * 60 * 24)) + '天';\n    },\n    formatDate: function (value, format, inputFormat) {\n        if (format === void 0) { format = 'LLL'; }\n        if (inputFormat === void 0) { inputFormat = ''; }\n        return moment_1.default(value, inputFormat).format(format);\n    }\n};\n// 缓存一下提升性能\nvar EVAL_CACHE = {};\nfunction lodashCompile(str, data) {\n    try {\n        var filters = tpl_builtin_1.getFilters();\n        var finnalImports = tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, filters), { formatTimeStamp: filters.date, formatNumber: filters.number, defaultValue: filters.defaut }), imports);\n        delete finnalImports.default; // default 是个关键字，不能 imports 到 lodash 里面去。\n        var fn = EVAL_CACHE[str] ||\n            (EVAL_CACHE[str] = template_1.default(str, {\n                imports: finnalImports,\n                variable: 'data'\n            }));\n        return fn.call(data, data);\n    }\n    catch (e) {\n        return \"<span class=\\\"text-danger\\\">\" + e.message + \"</span>\";\n    }\n}\nfunction register() {\n    return {\n        name: 'lodash',\n        test: function (str) { return !!~str.indexOf('<%'); },\n        compile: function (str, data) { return lodashCompile(str, data); }\n    };\n}\nexports.register = register;\n\n"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/amis/lib/utils/tpl-lodash.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}}],"sources":{"../node_modules/amis/lib/utils/tpl-lodash.js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.register = void 0;\nvar tslib_1 = require(\"tslib\");\nvar template_1 = tslib_1.__importDefault(require(\"lodash/template\"));\nvar tpl_builtin_1 = require(\"./tpl-builtin\");\nvar moment_1 = tslib_1.__importDefault(require(\"moment\"));\nvar imports = {\n    default: undefined,\n    moment: moment_1.default,\n    countDown: function (end) {\n        if (!end) {\n            return '--';\n        }\n        var date = new Date(parseInt(end, 10) * 1000);\n        var now = Date.now();\n        if (date.getTime() < now) {\n            return '已结束';\n        }\n        return Math.ceil((date.getTime() - now) / (1000 * 60 * 60 * 24)) + '天';\n    },\n    formatDate: function (value, format, inputFormat) {\n        if (format === void 0) { format = 'LLL'; }\n        if (inputFormat === void 0) { inputFormat = ''; }\n        return moment_1.default(value, inputFormat).format(format);\n    }\n};\n// 缓存一下提升性能\nvar EVAL_CACHE = {};\nfunction lodashCompile(str, data) {\n    try {\n        var filters = tpl_builtin_1.getFilters();\n        var finnalImports = tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, filters), { formatTimeStamp: filters.date, formatNumber: filters.number, defaultValue: filters.defaut }), imports);\n        delete finnalImports.default; // default 是个关键字，不能 imports 到 lodash 里面去。\n        var fn = EVAL_CACHE[str] ||\n            (EVAL_CACHE[str] = template_1.default(str, {\n                imports: finnalImports,\n                variable: 'data'\n            }));\n        return fn.call(data, data);\n    }\n    catch (e) {\n        return \"<span class=\\\"text-danger\\\">\" + e.message + \"</span>\";\n    }\n}\nfunction register() {\n    return {\n        name: 'lodash',\n        test: function (str) { return !!~str.indexOf('<%'); },\n        compile: function (str, data) { return lodashCompile(str, data); }\n    };\n}\nexports.register = register;\n\n"},"lineCount":55}},"error":null,"hash":"a846ce7e39a00d1b1b99fef32d88ac7a","cacheData":{"env":{}}}