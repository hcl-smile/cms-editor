{"id":"../node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js","dependencies":[{"name":"/usr/local/work/amis-editor/node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js.map","includedInParent":true,"mtime":1606963979744},{"name":"/usr/local/work/amis-editor/node_modules/mobx-react-lite/src/utils/reactionCleanupTrackingCommon.ts","includedInParent":true,"mtime":1606963979744},{"name":"/usr/local/work/amis-editor/package.json","includedInParent":true,"mtime":1607059427088},{"name":"/usr/local/work/amis-editor/node_modules/mobx-react-lite/package.json","includedInParent":true,"mtime":1606963979744}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTrackingData = createTrackingData;\nexports.CLEANUP_TIMER_LOOP_MILLIS = exports.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = void 0;\n\nfunction createTrackingData(reaction) {\n  var trackingData = {\n    reaction: reaction,\n    mounted: false,\n    changedBeforeMount: false,\n    cleanAt: Date.now() + CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS\n  };\n  return trackingData;\n}\n/**\n * The minimum time before we'll clean up a Reaction created in a render\n * for a component that hasn't managed to run its effects. This needs to\n * be big enough to ensure that a component won't turn up and have its\n * effects run without being re-rendered.\n */\n\n\nvar CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = 10000;\n/**\n * The frequency with which we'll check for leaked reactions.\n */\n\nexports.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS;\nvar CLEANUP_TIMER_LOOP_MILLIS = 10000;\nexports.CLEANUP_TIMER_LOOP_MILLIS = CLEANUP_TIMER_LOOP_MILLIS;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":6},"generated":{"line":9,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":16},"generated":{"line":9,"column":9}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":6},"generated":{"line":9,"column":27}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":35},"generated":{"line":9,"column":28}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":6},"generated":{"line":9,"column":36}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":3,"column":53},"generated":{"line":9,"column":38}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":4},"generated":{"line":10,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":10},"generated":{"line":10,"column":6}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":22},"generated":{"line":10,"column":18}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":44},"generated":{"line":10,"column":21}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":5,"column":8},"generated":{"line":11,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":5,"column":8},"generated":{"line":11,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":5,"column":16},"generated":{"line":11,"column":12}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":5,"column":16},"generated":{"line":11,"column":14}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":44},"generated":{"line":11,"column":22}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":6,"column":8},"generated":{"line":12,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":6,"column":8},"generated":{"line":12,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":6,"column":15},"generated":{"line":12,"column":11}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":6,"column":17},"generated":{"line":12,"column":13}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":44},"generated":{"line":12,"column":18}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":7,"column":8},"generated":{"line":13,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":7,"column":8},"generated":{"line":13,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":7,"column":26},"generated":{"line":13,"column":22}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":7,"column":28},"generated":{"line":13,"column":24}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":44},"generated":{"line":13,"column":29}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":8},"generated":{"line":14,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":8},"generated":{"line":14,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":15},"generated":{"line":14,"column":11}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":17},"generated":{"line":14,"column":13}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":21},"generated":{"line":14,"column":17}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":22},"generated":{"line":14,"column":18}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":17},"generated":{"line":14,"column":21}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":8,"column":30},"generated":{"line":14,"column":26}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":44},"generated":{"line":15,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":4,"column":4},"generated":{"line":15,"column":3}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":16,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":10,"column":11},"generated":{"line":16,"column":9}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":10,"column":4},"generated":{"line":16,"column":21}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":11,"column":1},"generated":{"line":17,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":61,"column":0},"generated":{"line":18,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":67,"column":7},"generated":{"line":26,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":67,"column":13},"generated":{"line":26,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":67,"column":50},"generated":{"line":26,"column":41}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":67,"column":53},"generated":{"line":26,"column":44}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":67,"column":7},"generated":{"line":26,"column":49}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":69,"column":0},"generated":{"line":27,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":72,"column":7},"generated":{"line":32,"column":0}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":32,"column":4}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":72,"column":38},"generated":{"line":32,"column":29}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":72,"column":41},"generated":{"line":32,"column":32}},{"source":"../../src/utils/reactionCleanupTrackingCommon.ts","name":null,"original":{"line":72,"column":7},"generated":{"line":32,"column":37}}],"sources":{"../../src/utils/reactionCleanupTrackingCommon.ts":"import { Reaction } from \"mobx\"\n\nexport function createTrackingData(reaction: Reaction) {\n    const trackingData: IReactionTracking = {\n        reaction,\n        mounted: false,\n        changedBeforeMount: false,\n        cleanAt: Date.now() + CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS\n    }\n    return trackingData\n}\n\n/**\n * Unified api for timers/Finalization registry cleanups\n * This abstraction make useObserver much simpler\n */\nexport interface ReactionCleanupTracking {\n    /**\n     *\n     * @param reaction The reaction to cleanup\n     * @param objectRetainedByReact This will be in actual use only when FinalizationRegister is in use\n     */\n    addReactionToTrack(\n        reactionTrackingRef: React.MutableRefObject<IReactionTracking | null>,\n        reaction: Reaction,\n        objectRetainedByReact: object\n    ): IReactionTracking\n    recordReactionAsCommitted(reactionRef: React.MutableRefObject<IReactionTracking | null>): void\n    forceCleanupTimerToRunNowForTests(): void\n    resetCleanupScheduleForTests(): void\n}\n\nexport interface IReactionTracking {\n    /** The Reaction created during first render, which may be leaked */\n    reaction: Reaction\n    /**\n     * The time (in ticks) at which point we should dispose of the reaction\n     * if this component hasn't yet been fully mounted.\n     */\n    cleanAt: number\n\n    /**\n     * Whether the component has yet completed mounting (for us, whether\n     * its useEffect has run)\n     */\n    mounted: boolean\n\n    /**\n     * Whether the observables that the component is tracking changed between\n     * the first render and the first useEffect.\n     */\n    changedBeforeMount: boolean\n\n    /**\n     * In case we are using finalization registry based cleanup,\n     * this will hold the cleanup token associated with this reaction\n     */\n    finalizationRegistryCleanupToken?: number\n}\n\n/**\n * The minimum time before we'll clean up a Reaction created in a render\n * for a component that hasn't managed to run its effects. This needs to\n * be big enough to ensure that a component won't turn up and have its\n * effects run without being re-rendered.\n */\nexport const CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = 10_000\n\n/**\n * The frequency with which we'll check for leaked reactions.\n */\nexport const CLEANUP_TIMER_LOOP_MILLIS = 10_000\n"},"lineCount":null}},"error":null,"hash":"0844c5a63e8d39f766ebf181260a692e","cacheData":{"env":{}}}