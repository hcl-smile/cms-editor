{"id":"../node_modules/react-base16-styling/lib/index.js","dependencies":[{"name":"/usr/local/work/amis-editor/package.json","includedInParent":true,"mtime":1607074594934},{"name":"/usr/local/work/amis-editor/node_modules/react-base16-styling/package.json","includedInParent":true,"mtime":1606632437076},{"name":"base16","loc":{"line":21,"column":45},"parent":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/index.js","resolved":"/usr/local/work/amis-editor/node_modules/base16/lib/index.js"},{"name":"color","loc":{"line":23,"column":44},"parent":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/index.js","resolved":"/usr/local/work/amis-editor/node_modules/color/index.js"},{"name":"lodash.curry","loc":{"line":25,"column":45},"parent":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/index.js","resolved":"/usr/local/work/amis-editor/node_modules/lodash.curry/index.js"},{"name":"./colorConverters","loc":{"line":27,"column":31},"parent":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/index.js","resolved":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/colorConverters.js"},{"name":"./types","loc":{"line":29,"column":21},"parent":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/index.js","resolved":"/usr/local/work/amis-editor/node_modules/react-base16-styling/lib/types.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  invertBase16Theme: true,\n  createStyling: true,\n  getBase16Theme: true,\n  invertTheme: true,\n  Base16Theme: true\n};\nObject.defineProperty(exports, \"Base16Theme\", {\n  enumerable: true,\n  get: function get() {\n    return base16.Base16Theme;\n  }\n});\nexports.invertTheme = exports.getBase16Theme = exports.createStyling = exports.invertBase16Theme = void 0;\n\nvar base16 = _interopRequireWildcard(require(\"base16\"));\n\nvar _color = _interopRequireDefault(require(\"color\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.curry\"));\n\nvar _colorConverters = require(\"./colorConverters\");\n\nvar _types = require(\"./types\");\n\nObject.keys(_types).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _types[key];\n    }\n  });\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar DEFAULT_BASE16 = base16[\"default\"];\nvar BASE16_KEYS = Object.keys(DEFAULT_BASE16); // we need a correcting factor, so that a dark, but not black background color\n// converts to bright enough inversed color\n\nvar flip = function flip(x) {\n  return x < 0.25 ? 1 : x < 0.5 ? 0.9 - x : 1.1 - x;\n};\n\nvar invertColor = function invertColor(hexString) {\n  var color = (0, _color[\"default\"])(hexString);\n\n  var _rgb2yuv = (0, _colorConverters.rgb2yuv)(color.array()),\n      _rgb2yuv2 = _slicedToArray(_rgb2yuv, 3),\n      y = _rgb2yuv2[0],\n      u = _rgb2yuv2[1],\n      v = _rgb2yuv2[2];\n\n  var flippedYuv = [flip(y), u, v];\n  var rgb = (0, _colorConverters.yuv2rgb)(flippedYuv);\n  return _color[\"default\"].rgb(rgb).hex();\n};\n\nvar merger = function merger(styling) {\n  return function (prevStyling) {\n    return {\n      className: [prevStyling.className, styling.className].filter(Boolean).join(' '),\n      style: _objectSpread(_objectSpread({}, prevStyling.style || {}), styling.style || {})\n    };\n  };\n};\n\nvar mergeStyling = function mergeStyling(customStyling, defaultStyling) {\n  if (customStyling === undefined) {\n    return defaultStyling;\n  }\n\n  if (defaultStyling === undefined) {\n    return customStyling;\n  }\n\n  var customType = _typeof(customStyling);\n\n  var defaultType = _typeof(defaultStyling);\n\n  switch (customType) {\n    case 'string':\n      switch (defaultType) {\n        case 'string':\n          return [defaultStyling, customStyling].filter(Boolean).join(' ');\n\n        case 'object':\n          return merger({\n            className: customStyling,\n            style: defaultStyling\n          });\n\n        case 'function':\n          return function (styling) {\n            for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              args[_key - 1] = arguments[_key];\n            }\n\n            return merger({\n              className: customStyling\n            })(defaultStyling.apply(void 0, [styling].concat(args)));\n          };\n      }\n\n      break;\n\n    case 'object':\n      switch (defaultType) {\n        case 'string':\n          return merger({\n            className: defaultStyling,\n            style: customStyling\n          });\n\n        case 'object':\n          return _objectSpread(_objectSpread({}, defaultStyling), customStyling);\n\n        case 'function':\n          return function (styling) {\n            for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            return merger({\n              style: customStyling\n            })(defaultStyling.apply(void 0, [styling].concat(args)));\n          };\n      }\n\n      break;\n\n    case 'function':\n      switch (defaultType) {\n        case 'string':\n          return function (styling) {\n            for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n              args[_key3 - 1] = arguments[_key3];\n            }\n\n            return customStyling.apply(void 0, [merger(styling)({\n              className: defaultStyling\n            })].concat(args));\n          };\n\n        case 'object':\n          return function (styling) {\n            for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n              args[_key4 - 1] = arguments[_key4];\n            }\n\n            return customStyling.apply(void 0, [merger(styling)({\n              style: defaultStyling\n            })].concat(args));\n          };\n\n        case 'function':\n          return function (styling) {\n            for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n              args[_key5 - 1] = arguments[_key5];\n            }\n\n            return customStyling.apply(void 0, [defaultStyling.apply(void 0, [styling].concat(args))].concat(args));\n          };\n      }\n\n  }\n};\n\nvar mergeStylings = function mergeStylings(customStylings, defaultStylings) {\n  var keys = Object.keys(defaultStylings);\n\n  for (var key in customStylings) {\n    if (keys.indexOf(key) === -1) keys.push(key);\n  }\n\n  return keys.reduce(function (mergedStyling, key) {\n    return mergedStyling[key] = mergeStyling(customStylings[key], defaultStylings[key]), mergedStyling;\n  }, {});\n};\n\nvar getStylingByKeys = function getStylingByKeys(mergedStyling, keys) {\n  for (var _len6 = arguments.length, args = new Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  if (keys === null) {\n    return mergedStyling;\n  }\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n\n  var styles = keys.map(function (key) {\n    return mergedStyling[key];\n  }).filter(Boolean);\n  var props = styles.reduce(function (obj, s) {\n    if (typeof s === 'string') {\n      obj.className = [obj.className, s].filter(Boolean).join(' ');\n    } else if (_typeof(s) === 'object') {\n      obj.style = _objectSpread(_objectSpread({}, obj.style), s);\n    } else if (typeof s === 'function') {\n      obj = _objectSpread(_objectSpread({}, obj), s.apply(void 0, [obj].concat(args)));\n    }\n\n    return obj;\n  }, {\n    className: '',\n    style: {}\n  });\n\n  if (!props.className) {\n    delete props.className;\n  }\n\n  if (Object.keys(props.style).length === 0) {\n    delete props.style;\n  }\n\n  return props;\n};\n\nvar invertBase16Theme = function invertBase16Theme(base16Theme) {\n  return Object.keys(base16Theme).reduce(function (t, key) {\n    return t[key] = /^base/.test(key) ? invertColor(base16Theme[key]) : key === 'scheme' ? base16Theme[key] + ':inverted' : base16Theme[key], t;\n  }, {});\n};\n\nexports.invertBase16Theme = invertBase16Theme;\nvar createStyling = (0, _lodash[\"default\"])(function (getStylingFromBase16) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var themeOrStyling = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$defaultBase = options.defaultBase16,\n      defaultBase16 = _options$defaultBase === void 0 ? DEFAULT_BASE16 : _options$defaultBase,\n      _options$base16Themes = options.base16Themes,\n      base16Themes = _options$base16Themes === void 0 ? null : _options$base16Themes;\n  var base16Theme = getBase16Theme(themeOrStyling, base16Themes);\n\n  if (base16Theme) {\n    themeOrStyling = _objectSpread(_objectSpread({}, base16Theme), themeOrStyling);\n  }\n\n  var theme = BASE16_KEYS.reduce(function (t, key) {\n    return t[key] = themeOrStyling[key] || defaultBase16[key], t;\n  }, {});\n  var customStyling = Object.keys(themeOrStyling).reduce(function (s, key) {\n    return BASE16_KEYS.indexOf(key) === -1 ? (s[key] = themeOrStyling[key], s) : s;\n  }, {});\n  var defaultStyling = getStylingFromBase16(theme);\n  var mergedStyling = mergeStylings(customStyling, defaultStyling);\n\n  for (var _len7 = arguments.length, args = new Array(_len7 > 3 ? _len7 - 3 : 0), _key7 = 3; _key7 < _len7; _key7++) {\n    args[_key7 - 3] = arguments[_key7];\n  }\n\n  return (0, _lodash[\"default\"])(getStylingByKeys, 2).apply(void 0, [mergedStyling].concat(args));\n}, 3);\nexports.createStyling = createStyling;\n\nvar isStylingConfig = function isStylingConfig(theme) {\n  return !!theme.extend;\n};\n\nvar getBase16Theme = function getBase16Theme(theme, base16Themes) {\n  if (theme && isStylingConfig(theme) && theme.extend) {\n    theme = theme.extend;\n  }\n\n  if (typeof theme === 'string') {\n    var _theme$split = theme.split(':'),\n        _theme$split2 = _slicedToArray(_theme$split, 2),\n        _themeName = _theme$split2[0],\n        modifier = _theme$split2[1];\n\n    if (base16Themes) {\n      theme = base16Themes[_themeName];\n    } else {\n      theme = base16[_themeName];\n    }\n\n    if (modifier === 'inverted') {\n      theme = invertBase16Theme(theme);\n    }\n  }\n\n  return theme && Object.prototype.hasOwnProperty.call(theme, 'base00') ? theme : undefined;\n};\n\nexports.getBase16Theme = getBase16Theme;\n\nvar invertTheme = function invertTheme(theme) {\n  if (typeof theme === 'string') {\n    return \"\".concat(theme, \":inverted\");\n  }\n\n  if (theme && isStylingConfig(theme) && theme.extend) {\n    if (typeof theme.extend === 'string') {\n      return _objectSpread(_objectSpread({}, theme), {}, {\n        extend: \"\".concat(theme.extend, \":inverted\")\n      });\n    }\n\n    return _objectSpread(_objectSpread({}, theme), {}, {\n      extend: invertBase16Theme(theme.extend)\n    });\n  }\n\n  if (theme) {\n    return invertBase16Theme(theme);\n  }\n\n  return theme;\n};\n\nexports.invertTheme = invertTheme;\n"},"sourceMaps":{"js":{"version":3,"sources":["../src/index.ts"],"names":["DEFAULT_BASE16","base16","BASE16_KEYS","Object","keys","flip","x","invertColor","hexString","color","array","y","u","v","flippedYuv","rgb","Color","hex","merger","styling","prevStyling","className","filter","Boolean","join","style","mergeStyling","customStyling","defaultStyling","undefined","customType","defaultType","args","mergeStylings","customStylings","defaultStylings","key","indexOf","push","reduce","mergedStyling","getStylingByKeys","Array","isArray","styles","map","props","obj","s","length","invertBase16Theme","base16Theme","t","test","createStyling","getStylingFromBase16","options","themeOrStyling","defaultBase16","base16Themes","getBase16Theme","theme","isStylingConfig","extend","split","themeName","modifier","prototype","hasOwnProperty","call","invertTheme"],"mappings":"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","sourcesContent":["import * as base16 from 'base16';\nimport { Base16Theme } from 'base16';\nimport Color from 'color';\nimport * as CSS from 'csstype';\nimport curry from 'lodash.curry';\nimport { Color as ColorTuple, yuv2rgb, rgb2yuv } from './colorConverters';\nimport {\n  Styling,\n  StylingConfig,\n  StylingFunction,\n  StylingValue,\n  StylingValueFunction,\n  Theme,\n} from './types';\n\nconst DEFAULT_BASE16 = base16.default;\n\nconst BASE16_KEYS = Object.keys(DEFAULT_BASE16);\n\n// we need a correcting factor, so that a dark, but not black background color\n// converts to bright enough inversed color\nconst flip = (x: number) => (x < 0.25 ? 1 : x < 0.5 ? 0.9 - x : 1.1 - x);\n\nconst invertColor = (hexString: string) => {\n  const color = Color(hexString);\n  const [y, u, v] = rgb2yuv(color.array() as ColorTuple);\n  const flippedYuv: ColorTuple = [flip(y), u, v];\n  const rgb = yuv2rgb(flippedYuv);\n  return Color.rgb(rgb).hex();\n};\n\nconst merger = (styling: Partial<Styling>) => {\n  return (prevStyling: Partial<Styling>) => ({\n    className: [prevStyling.className, styling.className]\n      .filter(Boolean)\n      .join(' '),\n    style: { ...(prevStyling.style || {}), ...(styling.style || {}) },\n  });\n};\n\nconst mergeStyling = (\n  customStyling: StylingValue,\n  defaultStyling: StylingValue\n): StylingValue | undefined => {\n  if (customStyling === undefined) {\n    return defaultStyling;\n  }\n  if (defaultStyling === undefined) {\n    return customStyling;\n  }\n\n  const customType = typeof customStyling;\n  const defaultType = typeof defaultStyling;\n\n  switch (customType) {\n    case 'string':\n      switch (defaultType) {\n        case 'string':\n          return [defaultStyling, customStyling].filter(Boolean).join(' ');\n        case 'object':\n          return merger({\n            className: customStyling as string,\n            style: defaultStyling as CSS.Properties<string | number>,\n          });\n        case 'function':\n          return (styling: Styling, ...args: any[]) =>\n            merger({\n              className: customStyling as string,\n            })((defaultStyling as StylingValueFunction)(styling, ...args));\n      }\n      break;\n    case 'object':\n      switch (defaultType) {\n        case 'string':\n          return merger({\n            className: defaultStyling as string,\n            style: customStyling as CSS.Properties<string | number>,\n          });\n        case 'object':\n          return {\n            ...(defaultStyling as CSS.Properties<string | number>),\n            ...(customStyling as CSS.Properties<string | number>),\n          };\n        case 'function':\n          return (styling: Styling, ...args: any[]) =>\n            merger({\n              style: customStyling as CSS.Properties<string | number>,\n            })((defaultStyling as StylingValueFunction)(styling, ...args));\n      }\n      break;\n    case 'function':\n      switch (defaultType) {\n        case 'string':\n          return (styling, ...args) =>\n            (customStyling as StylingValueFunction)(\n              merger(styling)({\n                className: defaultStyling as string,\n              }),\n              ...args\n            );\n        case 'object':\n          return (styling, ...args) =>\n            (customStyling as StylingValueFunction)(\n              merger(styling)({\n                style: defaultStyling as CSS.Properties<string | number>,\n              }),\n              ...args\n            );\n        case 'function':\n          return (styling, ...args) =>\n            (customStyling as StylingValueFunction)(\n              (defaultStyling as StylingValueFunction)(\n                styling,\n                ...args\n              ) as Styling,\n              ...args\n            );\n      }\n  }\n};\n\nconst mergeStylings = (\n  customStylings: StylingConfig,\n  defaultStylings: StylingConfig\n): StylingConfig => {\n  const keys = Object.keys(defaultStylings);\n  for (const key in customStylings) {\n    if (keys.indexOf(key) === -1) keys.push(key);\n  }\n\n  return keys.reduce(\n    (mergedStyling, key) => (\n      (mergedStyling[key as keyof StylingConfig] = mergeStyling(\n        customStylings[key] as StylingValue,\n        defaultStylings[key] as StylingValue\n      ) as StylingValue),\n      mergedStyling\n    ),\n    {} as StylingConfig\n  );\n};\n\nconst getStylingByKeys = (\n  mergedStyling: StylingConfig,\n  keys: (string | false | undefined) | (string | false | undefined)[],\n  ...args: any[]\n): Styling => {\n  if (keys === null) {\n    return (mergedStyling as unknown) as Styling;\n  }\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n\n  const styles = keys\n    .map((key) => mergedStyling[key as string])\n    .filter(Boolean);\n\n  const props = styles.reduce(\n    (obj, s) => {\n      if (typeof s === 'string') {\n        obj.className = [obj.className, s].filter(Boolean).join(' ');\n      } else if (typeof s === 'object') {\n        obj.style = { ...obj.style, ...s };\n      } else if (typeof s === 'function') {\n        obj = { ...obj, ...s(obj, ...args) };\n      }\n\n      return obj;\n    },\n    { className: '', style: {} }\n  );\n\n  if (!props.className) {\n    delete props.className;\n  }\n\n  if (Object.keys(props.style).length === 0) {\n    delete props.style;\n  }\n\n  return props;\n};\n\nexport const invertBase16Theme = (base16Theme: Base16Theme): Base16Theme =>\n  Object.keys(base16Theme).reduce(\n    (t, key) => (\n      (t[key as keyof Base16Theme] = /^base/.test(key)\n        ? invertColor(base16Theme[key as keyof Base16Theme])\n        : key === 'scheme'\n        ? base16Theme[key] + ':inverted'\n        : base16Theme[key as keyof Base16Theme]),\n      t\n    ),\n    {} as Base16Theme\n  );\n\nexport const createStyling = curry(\n  (\n    getStylingFromBase16: (base16Theme: Base16Theme) => StylingConfig,\n    options: {\n      defaultBase16?: Base16Theme;\n      base16Themes?: { [themeName: string]: Base16Theme };\n    } = {},\n    themeOrStyling: Theme = {},\n    ...args\n  ): StylingFunction => {\n    const { defaultBase16 = DEFAULT_BASE16, base16Themes = null } = options;\n\n    const base16Theme = getBase16Theme(themeOrStyling, base16Themes);\n    if (base16Theme) {\n      themeOrStyling = {\n        ...base16Theme,\n        ...(themeOrStyling as Base16Theme | StylingConfig),\n      };\n    }\n\n    const theme = BASE16_KEYS.reduce(\n      (t, key) => (\n        (t[key as keyof Base16Theme] =\n          (themeOrStyling as Base16Theme)[key as keyof Base16Theme] ||\n          defaultBase16[key as keyof Base16Theme]),\n        t\n      ),\n      {} as Base16Theme\n    );\n\n    const customStyling = Object.keys(themeOrStyling).reduce(\n      (s, key) =>\n        BASE16_KEYS.indexOf(key) === -1\n          ? ((s[key] = (themeOrStyling as StylingConfig)[key]), s)\n          : s,\n      {} as StylingConfig\n    );\n\n    const defaultStyling = getStylingFromBase16(theme);\n\n    const mergedStyling = mergeStylings(customStyling, defaultStyling);\n\n    return curry(getStylingByKeys, 2)(mergedStyling, ...args);\n  },\n  3\n);\n\nconst isStylingConfig = (theme: Theme): theme is StylingConfig =>\n  !!(theme as StylingConfig).extend;\n\nexport const getBase16Theme = (\n  theme: Theme,\n  base16Themes?: { [themeName: string]: Base16Theme } | null\n): Base16Theme | undefined => {\n  if (theme && isStylingConfig(theme) && theme.extend) {\n    theme = theme.extend as string | Base16Theme;\n  }\n\n  if (typeof theme === 'string') {\n    const [themeName, modifier] = theme.split(':');\n    if (base16Themes) {\n      theme = base16Themes[themeName];\n    } else {\n      theme = base16[themeName as keyof typeof base16];\n    }\n    if (modifier === 'inverted') {\n      theme = invertBase16Theme(theme);\n    }\n  }\n\n  return theme && Object.prototype.hasOwnProperty.call(theme, 'base00')\n    ? (theme as Base16Theme)\n    : undefined;\n};\n\nexport const invertTheme = (theme: Theme | undefined): Theme | undefined => {\n  if (typeof theme === 'string') {\n    return `${theme}:inverted`;\n  }\n\n  if (theme && isStylingConfig(theme) && theme.extend) {\n    if (typeof theme.extend === 'string') {\n      return { ...theme, extend: `${theme.extend}:inverted` };\n    }\n\n    return {\n      ...theme,\n      extend: invertBase16Theme(theme.extend as Base16Theme),\n    };\n  }\n\n  if (theme) {\n    return invertBase16Theme(theme as Base16Theme);\n  }\n\n  return theme;\n};\n\nexport { Base16Theme };\nexport * from './types';\n"]}},"error":null,"hash":"11128833fae74bd9640532b736240205","cacheData":{"env":{}}}